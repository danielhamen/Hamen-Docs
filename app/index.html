<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Andika:ital,wght@0,400;0,700;1,400;1,700&family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Noto+Sans:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap"
            rel="stylesheet">

		<!-- Google Icons: -->
		<link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sofia+Sans+Semi+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

		<!--  -->
		<script type="text/javascript" src="API/DocsAPI.js"></script>
		<script type="text/javascript" src="API/HamenAPI.js"></script>
		<script type="text/javascript" src="scripts/index.js"></script>
		<script type="text/javascript" src="scripts/homepage.js"></script>

		<!--  -->
		<link rel="stylesheet" href="style/index.css">
		<link rel="stylesheet" href="style/homepage.css">
		<link rel="stylesheet" href="style/colors.css">
		<link rel="stylesheet" href="API/DocsAPI.css">
		<link rel="stylesheet" href="API/HamenAPI.css">

		<!-- Favicon: -->
		<link rel="icon" href="images/favicon.ico">

		<title>Hamen Docs</title>

        <script type="text/javascript">
            /**
             * Checks whether a an element is visible
            */
            function isVisible(el) {
                var rect = el.getBoundingClientRect();

                return (rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && rect.right <= (window.innerWidth || document.documentElement.clientWidth));
            }

            function toggleFadeElements() {
                Array.from(document.querySelectorAll(".fade-in")).forEach(elem => {
                    if (isVisible(elem) || elem.classList.contains("default")) {
                        elem.classList.add("visible");
                        if (elem.getAttribute("delay")) {
                            elem.style.animationDelay = elem.getAttribute("delay");
                        }
                    } else {
                        elem.classList.remove("visible");
                    }
                })
            }

            window.addEventListener("load", function() {
                document.addEventListener("scroll", function() {
                    toggleFadeElements();
                }); document.addEventListener("resize", function() {
                    toggleFadeElements();
                }); document.addEventListener("DOMContentLoaded", function() {
                    toggleFadeElements();
                });

                toggleFadeElements();
            })
        </script>

        <style>
            @keyframes fadeInAnimation {
                from {
                    opacity: 0%;
                } to {
                    opacity: 100%;
                }
            }

            .fade-in {
                opacity: 0%;
            }

            .fade-in.visible {
                animation: fadeInAnimation 0.9s forwards;
            }
        </style>
	</head>
	<body>
		<header step=""></header>
		<main>
            <div class="home-page">
                <div class="first-section">
                    <h1 id="home-page-title" class="no-link fade-in">Hamen Docs</h1>
                    <span id="home-page-sub-title" class="fade-in" delay="150ms">Experience the Power of Knowledge</span>
                    <div class="home-page-search fade-in" delay="300ms">
                        <div class="input">
                            <input type="text" placeholder='Try searching: "Python Documentation"'>
                            <!-- <button type="button" class="submit">
                                <span class="material-symbols-outlined"> search </span>
                            </button> -->
                        </div>
                        <div class="results"></div>
                    </div>
                    <script type="text/javascript">
                        function editDistance(s1, s2) {
                            s1 = s1.toLowerCase();
                            s2 = s2.toLowerCase();

                            var costs = new Array();
                            for (var i = 0; i <= s1.length; i++) {
                                var lastValue = i;
                                for (var j = 0; j <= s2.length; j++) {
                                    if (i == 0)
                                        costs[j] = j;
                                    else {
                                        if (j > 0) {
                                            var newValue = costs[j - 1];
                                            if (s1.charAt(i - 1) != s2.charAt(j - 1))
                                                newValue = Math.min(Math.min(newValue, lastValue),
                                                    costs[j]) + 1;
                                            costs[j - 1] = lastValue;
                                            lastValue = newValue;
                                        }
                                    }
                                }
                                if (i > 0)
                                    costs[s2.length] = lastValue;
                            }
                            return costs[s2.length];
                        }

                        function similarity(s1, s2) {
                            var longer = s1;
                            var shorter = s2;
                            if (s1.length < s2.length) {
                                longer = s2;
                                shorter = s1;
                            }
                            var longerLength = longer.length;
                            if (longerLength == 0) {
                                return 1.0;
                            }
                            return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
                        }

                        const courses = {
                            "Python Course": "tutorials/python-course/index.html",
                            "HTML Course": "tutorials/python-course/index.html",
                            "CSS Course": "tutorials/python-course/index.html",
                            "RWD Course": "tutorials/python-course/index.html",
                            "Bootstrap Course": "tutorials/python-course/index.html",
                        }

                        function getResults(input) {
                            let max = 0;
                            let maxCourses = [];
                            let value = input.value;
                            Object.keys(courses).forEach(key => {
                                let sim = similarity(value.toLowerCase(), key.toLowerCase());
                                if (sim > max) {
                                    max = sim;
                                    maxCourses = [key];
                                } else if (sim == max) {
                                    maxCourses.push(key);
                                }
                            })

                            return maxCourses;
                        }
                        
                        window.addEventListener("load", function() {
                            let input = document.querySelector(".home-page-search > .input > input");
                            if (input) {
                                input.focus();
                                input.select();

                                input.addEventListener("keypress", function(e) {
                                    if (e.key == "Enter") {
                                        window.location.assign(courses[getResults(input)[0]]);
                                    }
                                });

                                input.addEventListener("input", function() {
                                    let results = document.querySelector(".home-page-search > .results")
                                    if (input.value.length == 0) {
                                        results.classList.remove("visible");
                                    } else {
                                        let res = getResults(input);
                                        let i = 0;
                                        if (res.length != 0) {
                                            results.innerHTML = "";
                                            results.classList.add("visible");
                                            Array.from(res).forEach(resultKey => {
                                                if (i <= 8) {
                                                    result = courses[resultKey];
                                                    console.log(result);
                                                    results.innerHTML += `<div class="result" onclick="window.location.assign('${result}')"> ${resultKey} </div>`;
                                                    i += 1;
                                                }
                                            })
                                        }
                                    }
                                })
                            }
                        })
                    </script>
                </div>
                <div class="top-courses">
                    <span id="top-courses" class="fade-in">Top Courses:</span>
                    <svg style="background: #20242a;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1920" height="280" viewBox="0 0 1920 280"><defs><filter id="Path_1" x="0" y="0" width="1920" height="280" filterUnits="userSpaceOnUse"><feOffset dy="3" input="SourceAlpha" /><feGaussianBlur stdDeviation="49.5" result="blur" /><feFlood flood-opacity="0.239" /><feComposite operator="in" in2="blur" /><feComposite in="SourceGraphic" /></filter></defs><g transform="matrix(1, 0, 0, 1, 0, 0)" filter="url(#Path_1)"><path id="Path_1-2" data-name="Path 1" d="M 1920 1080 S 1601 1153 1257 1144 S 849 1108 542 1096 S 0 1133 0 1133 V 1329 H 1920 Z" transform="translate(0 -1000)" fill="#c6f3cc" /></g></svg>
                    <div class="background"></div>
                    <div class="items">
                        <div class="course fade-in" delay="50ms">
                            <span class="title">Code:</span>
                            <div class="item"><span>HTML</span></div>
                            <div class="item" onclick="window.location.assign('tutorials/python-course/index.html');"><span>Python</span></div>
                            <div class="item"><span>Javascript</span></div>
                            <button type="button" class="view-more a">View More</button>
                        </div>
                        <div class="course fade-in" delay="100ms">
                            <span class="title">Software:</span>
                            <div class="item"><span>Adobe Photoshop</span></div>
                            <div class="item"><span>Microsoft Excel</span></div>
                            <div class="item"><span>AutoCAD</span></div>
                            <button type="button" class="view-more b">View More</button>
                        </div>
                        <div class="course fade-in" delay="150ms">
                            <span class="title">Science:</span>
                            <div class="item"><span>Electromagnetism</span></div>
                            <div class="item"><span>Refraction</span></div>
                            <div class="item"><span>Cells</span></div>
                            <button type="button" class="view-more c">View More</button>
                        </div>
                    </div>
                </div>
            </div>
		</main>
	</body>
</html>